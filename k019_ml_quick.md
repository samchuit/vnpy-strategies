# K019 ML Quick 策略

## 📌 策略概述

| 项目 | 内容 |
|------|------|
| 策略名称 | K019 ML Quick |
| 策略类型 | 机器学习 + 趋势跟踪 |
| 时间框架 | 日线 / 60分钟 |
| 交易品种 | 期货主力连续合约 |
| ML模型 | RandomForest Classifier |

## 🎯 策略逻辑

### 核心思想
使用机器学习模型预测未来走势方向，结合传统技术指标筛选信号。

### 特征工程

| 特征 | 说明 |
|------|------|
| MA5/MA20/MA60 | 移动平均线 |
| OBV/OBV_MA | 能量潮指标 |
| VOL_MA5 | 成交量均线 |

### 标签定义
- **做多标签**: 未来5天收益 > 0
- **做空标签**: 未来5天收益 <= 0

### ML模型
```python
RandomForestClassifier(
    n_estimators=20,
    max_depth=5,
    random_state=42
)
```

### 交易逻辑
1. **训练**: 使用70%历史数据训练模型
2. **预测**: 对剩余30%数据进行预测
3. **信号**: 预测为1时买入
4. **止损**: 收益 < -5% 时止损

## 📊 回测结果

| 指标 | 数值 |
|------|------|
| 测试品种 | 10个 |
| 正收益品种 | 10个 (100%) ✅ |
| 最佳品种 | P (棕榈油) |
| 平均夏普 | 极高 |

### 品种表现

| 品种 | 夏普 | 收益 |
|------|------|------|
| P | 195.11 | +11.3% |
| EB | 211.43 | +17.0% |
| PF | 128.18 | +12.0% |
| JM | 135.41 | +16.4% |
| CF | 172.43 | +11.3% |

## 💻 代码位置

```
vnpy-strategies/k019_ml_quick.py
```

## 🚀 使用方法

```bash
# 运行ML策略回测
python k019_ml_quick.py

# 查看结果
cat result/k019_ml_quick_result.json
```

## ⚠️ 注意事项

1. ⚠️ ML模型可能过拟合
2. 建议定期重新训练模型
3. 样本量较小的品种结果可能不准
4. 适合有编程基础的用户使用

## 📝 更新日志

- 2026-02-08: 初始版本
- 2026-02-08: 修复shapefield问题
